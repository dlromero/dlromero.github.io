
<div class="container" style="margin-top: 5em;">
    <div class="row">
        <div class="jumbotron">
            <form method="post" action="https://sandbox.gateway.payulatam.com/ppp-web-gateway/" onsubmit="onCallBackPayu()">
                <div class="container" ng-controller="ShoppingCartCtrl">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <a class="glyphicon glyphicon glyphicon-arrow-left app-link" style="padding: 1em;" href="#/">
                                Volver
                            </a>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        INFORMACIÓN DE USUARIO Y ENTREGA
                                    </h3>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group has-warning has-feedback app-form-group-input" id="formNameCheckOut">
                                        <label for="NameCheckOut">¡Tu nombre!</label>
                                        <input type="text" class="form-control" id="tbNameCheckOut" placeholder="Escribe tu nombre" required>
                                        <span class="glyphicon glyphicon-warning-sign form-control-feedback app-input-glyphicon" id="spGlyphiconNameCheckOut">
                                        </span>
                                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                        <div id="dvMessageNameCheckOut" class="help-block hidden">¡ Tu nombre!</div>
                                    </div>
                                    <div class="form-group has-warning has-feedback app-form-group-input" id="formEmailCheckOut">
                                        <label for="EmailCheckOut">¡Tu correo electrónico!</label>
                                        <input type="text" class="form-control" id="tbEmailCheckOut" placeholder="Escribe tu correo electrónico" required>
                                        <span class="glyphicon glyphicon-warning-sign form-control-feedback app-input-glyphicon" id="spGlyphiconEmailCheckOut">
                                        </span>
                                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                        <div id="dvMessageEmailCheckOut" class="help-block hidden">¡ Tu correo electrónico!</div>
                                    </div>
                                    <div class="form-group has-warning has-feedback app-form-group-input" id="formPhoneCheckOut">
                                        <label for="PhoneCheckOut">¡Tu telefono!</label>
                                        <input type="text" class="form-control" id="tbPhoneCheckOut" placeholder="Escribe tu telefono" required>
                                        <span class="glyphicon glyphicon-warning-sign form-control-feedback app-input-glyphicon" id="spGlyphiconPhoneCheckOut">
                                        </span>
                                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                        <div id="dvMessagePhoneCheckOut" class="help-block hidden">¡ Tu telefono!</div>
                                    </div>
                                    <div class="form-group has-warning has-feedback app-form-group-input" id="formAddressCheckOut">
                                        <label for="AddressCheckOut">¡Tu dirección!</label>
                                        <input type="text" class="form-control" id="tbAddressCheckOut" placeholder="Escribe tu dirección" required>
                                        <span class="glyphicon glyphicon-warning-sign form-control-feedback app-input-glyphicon" id="spGlyphiconAddressCheckOut">
                                        </span>
                                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                        <div id="dvMessageAddressCheckOut" class="help-block hidden">¡ Tu dirección!</div>
                                    </div>
                                    <div class="form-group has-warning has-feedback app-form-group-input" id="formCityCheckOut">
                                        <label for="CityCheckOut">¡Tu ciudad!</label>
                                        <input type="text" class="form-control" id="tbCityCheckOut" placeholder="Escribe tu ciudad" required>
                                        <span class="glyphicon glyphicon-warning-sign form-control-feedback app-input-glyphicon" id="spGlyphiconCityCheckOut">
                                        </span>
                                        <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                        <div id="dvMessageCityCheckOut" class="help-block hidden">¡ Tu ciudad!</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">
                                            METODO DE PAGO
                                        </h3>
                                    </div>
                                    <div class="panel-body">
                                        <div class="radio radio-primary">
                                            <label>
                                                <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked="checked">
                                                Tarjeta de credito
                                                <img class="img img-responsive" src="~/Content/Payment/CreditCard.png"/>
                                            </label>
                                        </div>
                                        <div class="radio radio-primary">
                                            <label>
                                                <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
                                                PSE
                                                <img class="img img-responsive" src="~/Content/Payment/PSE.png" />
                                            </label>
                                        </div>
                                        <div class="radio radio-primary">
                                            <label>
                                                <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
                                                Pago en bancos
                                                <img class="img img-responsive" src="~/Content/Payment/Banks.png" />
                                            </label>
                                        </div>
                                        <div class="radio radio-primary">
                                            <label>
                                                <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
                                                Pago en efectivo
                                                <img class="img img-responsive" src="~/Content/Payment/Efecty.png" />
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>*@
                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        RESUMEN DE COMPRA
                                    </h3>
                                </div>
                                <div class="panel-body" id="purchaseResume">
                                    <div ng-repeat="actividad in shoe" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                        <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3 text-left ">
                                            {{actividad.name}}
                                        </div>
                                        <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3 text-center">
                                            {{actividad.quantity}}
                                        </div>
                                        <div class="hidden-xs hidden-xs col-md-3 col-lg-3 text-center">
                                            X
                                        </div>
                                        <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3 text-right">
                                            ${{actividad.price | number:2}}
                                        </div>
                                    </div>
                                    @*<dl class="dl-horizontal" ng-repeat="actividad in shoe">
                                            <dt></dt> {{actividad.name}} <dt>
                                            <dd>${{actividad.price | number:2}}</dd>
                                        </dl>*@
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 pull-right text-right">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <h3>
                                    TOTAL A PAGAR:
                                    <span class="label label-default">${{getTotal() | number:2}}</span>
                                </h3>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <span class="badge">{{getTotalShopping()}} (ZAPATOS)</span>
                            </div>


                            <button class="glyphicon glyphicon glyphicon-ok app-glyphicon2 add-to-cart">
                                REALIZAR PEDIDO
                            </button>

                            @*<span class="glyphicon glyphicon glyphicon-ok app-glyphicon2 add-to-cart">
                                    REALIZAR PEDIDO
                                </span>*@

                            <input id="merchantId" name="merchantId" type="hidden" value="508029">
                            <input id="accountId" name="accountId" type="hidden" value="512321">
                            <input id="description" name="description" type="hidden" value="Compra de zapatos tienda Bottini">
                            <input id="referenceCode" name="referenceCode" type="hidden" value="{{date | date:'yyyy-MM-dd hh:mm:ss'}}">
                            <input id="amount" name="amount" type="hidden" value="{{getTotal()}}">
                            <input id="tax" name="tax" type="hidden" value="0">
                            <input id="taxReturnBase" name="taxReturnBase" type="hidden" value="0">
                            <input id="currency" name="currency" type="hidden" value="COP">
                            <input id="signature" name="signature" type="hidden" value="1d81cd761b4e446654a5043375cd1041">
                            <input id="test" name="test" type="hidden" value="1">
                            <input id="buyerEmail" name="buyerEmail" type="hidden" value="raiga1234@gmail.com">
                            <input id="responseUrl" name="responseUrl" type="hidden" value="http://mcodigo.com/bottini/Security/Response">
                            <input id="confirmationUrl" name="confirmationUrl" type="hidden" value="http://mcodigo.com/bottini/Security/Confirmation">
                            <input id="lng" name="lng" type="hidden" value="es">
                            <input id="payerFullName" name="payerFullName" type="hidden" value="default">
                            <input id="shippingAddress" name="shippingAddress" type="hidden" value="Address">
                            <input id="billingCity" name="billingCity" type="hidden" value="City">

                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<script>
    $.material.init();

    function onCallBackPayu() {
        console.log("Entro");
        var api = "4Vj8eK4rloUd272L48hsrarnUA";
        var merchantId = $("#merchantId").val();
        var reference = $("#referenceCode").val();
        var value = $("#amount").val();
        var currency = $("#currency").val();
        $("#buyerEmail").val($("#tbEmailCheckOut").val());
        $("#payerFullName").val($("#tbNameCheckOut").val());
        $("#shippingAddress").val($("#tbAddressCheckOut").val());
        $("#billingCity").val($("#tbCityCheckOut").val());
        var base = api + "~" + merchantId + "~" + reference + "~" + value + "~" + currency;
        $("#signature").val(md5(base));
        console.log($("#signature").val());
        console.log("salio");
        return true();
    }
</script>